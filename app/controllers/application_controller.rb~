class ApplicationController < ActionController::Base
  protect_from_forgery

  before_filter :authenticate_user!

  
  
  def after_sign_in_path_for(resource)
    schedule = Schedule.all(:conditions => ["user_id = ?", current_user.id])
    @schedule = schedule[0]
    
    session[:schedule_id] = @schedule.id

    requests = CaregiverRequest.all(:conditions => ["patient_email = ?", current_user.email])
    
    if requests
      session[:has_notifications] = true
    end
    
    home_path
  end

end
